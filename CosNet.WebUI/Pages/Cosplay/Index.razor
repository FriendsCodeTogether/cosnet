@page "/cosplay"
@inject HttpClient Http
@inject NavigationManager NavigationManager

<h3>My Cosplay</h3>
<a style="" class="btn btn-primary rounded-pill rounded-pill" href="cosplay/create">Create</a>

@if (cosplays == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table table-dark table-hover mt-4">
        <tbody>
            @foreach (var cosplay in cosplays)
            {
                <tr class="table-dark-row" @onclick="() => ClickedToId(cosplay.CosplayId)">
                    <td>Pic</td>
                    <td>Character: @cosplay.Name <br /> Series: @cosplay.Serie <br /> Status: @cosplay.Status</td>
                    <td><br /> @cosplay.DueDate</td>
                    <td>Icon</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private List<CosplayDTO> cosplays;

    protected override async Task OnInitializedAsync()
    {
        cosplays = await Http.GetFromJsonAsync<List<CosplayDTO>>("/cosplay");
    }

    public void ClickedToId(Guid cosplayId)
    {
        NavigationManager.NavigateTo($"cosplay/{cosplayId.ToString()}");
    }
}
